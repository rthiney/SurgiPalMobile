<ion-header>
    <ion-navbar no-border-bottom>
        <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
        <ion-title>{{ title}}</ion-title>
        <ion-segment [(ngModel)]="segment" (ionChange)="updateSegment()">
            <ion-segment-button value="today">
                Today
            </ion-segment-button>
            <ion-segment-button value="future">
                Future
            </ion-segment-button>
            <ion-segment-button value="past">
                Past
            </ion-segment-button>
        </ion-segment>


    </ion-navbar>

    <!--<ion-toolbar no-border-top>
        <ion-searchbar color="primary" [(ngModel)]="queryText" (ionInput)="updateSchedule()" placeholder="Search">
        </ion-searchbar>
    </ion-toolbar>-->
</ion-header>

<ion-content>
    <ion-refresher (ionRefresh)="doRefresh($event)">
        <ion-refresher-content pullingIcon="arrow-dropdown" pullingText="Pull to refresh" refreshingSpinner="circles" refreshingText="Refreshing Surgeries">
        </ion-refresher-content>
    </ion-refresher>

    <!--<ion-item-group *ngFor="let group of groupedSurgeries">
 
      <ion-item-divider light>{{group.d}}</ion-item-divider>
      <ion-item *ngFor="let s of group.surgeries">{{s.patient}}



      </ion-item>
 
    </ion-item-group>
 -->
    <div [ngSwitch]="segment" padding class="about-info">

        <ion-list #surgeryList *ngSwitchCase="'future'">

            <ion-item-group *ngFor="let group of groups" [hidden]="group.hide">

                <ion-item-divider sticky>
                    <ion-label>
                        {{group.d}}
                    </ion-label>
                </ion-item-divider>

                <ion-card *ngFor="let s of group.surgeries;   let i = index;" #slidingItem [attr.track]="s.surgery.admissionStatus | lowercase" [hidden]="s.surgery.hide">
                    <img src="assets/img/rooms/s{{i+1}}.PNG" />
                    <div class="card-title">{{s.surgery.initials | uppercase}}</div>
                    <div class="card-subtitle">{{s.surgery.patient}}</div>


                    <ion-item (click)="loadDetail(s.surgery)">
                        <ion-avatar item-left>
                            <img [src]="s.surgery.doctorImage" />
                        </ion-avatar>
                        <h2>{{s.surgery.initials}}</h2>
                        <h2>{{s.surgery.patient}}</h2>
                        <p> Duration: {{s.surgery.surgeryTime}}</p>
                        <p> <i> {{s.surgery.term | date:'shortDate'}} at  {{s.surgery.term | date:'shortTime'}} </i></p>

                    </ion-item>
                    <ion-card-content>

                        <ion-list>



                            <button ion-item (click)="showEditCodes(s,'CPT')">
    <ion-icon name="barcode" item-left small></ion-icon>
    <h2>CPT Codes</h2>
    <p>{{s.surgery.cpt}}</p>
  </button>

                            <button ion-item (click)="showEditCodes(s,'DX')">
    <ion-icon name="barcode" item-left small></ion-icon>
    <h2>DX Codes</h2>
    <p>{{s.surgery.diagnosisCode}}</p>
  </button>

                            <button ion-item small color="favorite" (click)="sendBilling(s)">
    <ion-icon name="cash" item-left small></ion-icon>
    <h2>Bill</h2>
    <p>Send billing information to <b>{{s.surgery.billingCoordinatorName}}</b></p>
  </button>
                            <button ion-item color="danger" (click)="cancelSurgery(s.surgery,slidingItem)">
    <ion-icon name="close-circle" item-left small></ion-icon>
    <h2>Cancel</h2>
    <p>Cancel surgery and remove from this list!</p>
  </button>


                        </ion-list>
                    </ion-card-content>
                </ion-card>


            </ion-item-group>
        </ion-list>
        <ion-list-header [hidden]="showSurgeries > 0" *ngSwitchCase="'future'">
            No Scheduled Surgeries in the future..
        </ion-list-header>






        <ion-list #surgeryList *ngSwitchCase="'today'">
            <ion-card *ngFor="let s of surgeries;   let i = index;" #slidingItem>
                <img src="assets/img/rooms/s{{i+1}}.PNG" />
                <div class="card-title">{{s.surgery.initials | uppercase}}</div>
                <div class="card-subtitle">{{s.surgery.patient}}</div>





                <ion-list>
                    <ion-item-sliding>
                        <ion-item (click)="showDetail(s.surgery)">
                            <ion-avatar item-left>
                                <img [src]="s.surgery.doctorImage" />
                            </ion-avatar>
                            <h2>{{s.surgery.initials}}</h2>
                            <h2>{{s.surgery.patient}}</h2>
                            <h2>{{s.surgery.admissionStatus}}</h2>
                            <ion-note>
                                Duration: {{s.surgery.surgeryTime}} <br><i> {{s.surgery.term | date:'shortDate'}} at  {{s.surgery.term | date:'shortTime'}} </i></ion-note>


                        </ion-item>
                        <ion-item-options side="left">
                            <button ion-button color='favorite' (click)="sendBilling(s)">
    <ion-icon name="cash" item-left   ></ion-icon>
     Bill
 
      </button>
                            <button ion-button color="google" (click)="cancelSurgery(s)"> 
     <ion-icon name="close-circle" item-left small ></ion-icon>
     Cancel
      </button>
                        </ion-item-options>
                        <ion-item-options side="right">
                            <button ion-button color="light" (click)="showEditCodes(s,'CPT')">
        <ion-icon name="barcode"></ion-icon>
        CPT
      </button>
                            <button ion-button color="light" (click)="showEditCodes(s,'DX')">
        <ion-icon name="barcode"></ion-icon>
        DX
      </button>
                        </ion-item-options>
                    </ion-item-sliding>
                </ion-list>






                <ion-card-content>

                    <ion-list border>


                        <button ion-item (click)="showEditCodes(s.surgery,'CPT')">
    <ion-icon name="barcode" item-left small></ion-icon>
    <h2>CPT Codes</h2>
    <p>{{s.surgery.cpt}}</p>
    
  </button>

                        <button ion-item (click)="showEditCodes(s.surgery,'DX')">
    <ion-icon name="barcode" item-left small></ion-icon>
    <h2>DX Codes</h2>
    <p>{{s.surgery.diagnosisCode}}</p>
  </button>



                        <ion-item>
                            <ion-icon name="cash" item-left small></ion-icon>
                            <h2>Bill</h2>
                            <p>Send billing information to <b>{{s.surgery.billingCoordinatorName}}</b></p>
                            <button ion-button clear item-end (click)="sendBilling(s.surgery)">Bull</button>
                        </ion-item>


                        <ion-item>
                            <h2>Bill</h2>
                            <p>Send billing information to <b>{{s.surgery.billingCoordinatorName}}</b></p>
                            <button ion-button clear item-end (click)="sendBilling(s.surgery)">  <ion-icon name="cash" item-left small></ion-icon></button>
                        </ion-item>

                        <ion-item-divider color="light">Other</ion-item-divider>
                        <button ion-item small color="favorite" (click)="sendBilling(s.surgery)">
    <ion-icon name="cash" item-left small ></ion-icon>
    <h2>Bill</h2> 
    <p>Send billing information to <b>{{s.surgery.billingCoordinatorName}}</b></p> 
  </button>
                        <button ion-item small color="danger" (click)="cancelSurgery(s.surgery,slidingItem)">
    <ion-icon name="close-circle" item-left small></ion-icon>
    <h2>Cancel</h2>
    <p>Cancel surgery and remove from this list!</p>
  </button>


                    </ion-list>
                </ion-card-content>
            </ion-card>
        </ion-list>
        <ion-list-header [hidden]="surgeries > 0" *ngSwitchCase="'today'">
            No Surgeries today {{ todaySurgeries | json}}
        </ion-list-header>



















        <ion-list #surgeryList *ngSwitchCase="'past'">
            <ion-card *ngFor="let s of surgeries;   let i = index;" #slidingItem>
                <img src="assets/img/rooms/s{{i+1}}.PNG" />
                <div class="card-title">{{s.surgery.initials | uppercase}}</div>
                <div class="card-subtitle">{{s.surgery.patient}}</div>


                <ion-item (click)="loadDetail(s.surgery)">
                    <ion-avatar item-left>
                        <img [src]="s.surgery.doctorImage" />
                    </ion-avatar>
                    <h2>{{s.surgery.initials}}</h2>
                    <h2>{{s.surgery.patient}}</h2>
                    <h2>{{s.surgery.admissionStatus}}</h2>
                    <p> Duration: {{s.surgery.surgeryTime}}</p>
                    <p> <i> {{s.surgery.term | date:'shortDate'}} at  {{s.surgery.term | date:'shortTime'}} </i></p>

                </ion-item>



                <ion-list>
                    <ion-item-sliding>
                        <ion-item>
                            <ion-avatar item-left>
                                <img [src]="s.surgery.doctorImage" />
                            </ion-avatar>
                            <h2>{{s.surgery.initials}}</h2>
                            <h2>{{s.surgery.patient}}</h2>
                            <h2>{{s.surgery.admissionStatus}}</h2>
                            <ion-note>
                                Duration: {{s.surgery.surgeryTime}} </ion-note>
                            <p> <i> {{s.surgery.term | date:'shortDate'}} at  {{s.surgery.term | date:'shortTime'}} </i></p>

                        </ion-item>
                        <ion-item-options side="left">
                            <button ion-button color='light' (click)="sendBilling(s.surgery)">
    <ion-icon name="cash" item-left   ></ion-icon>
     Bill
 
      </button>
                            <button ion-button color="google" (click)="sendBilling(s.surgery)"> 
     <ion-icon name="close-circle" item-left small ></ion-icon>
     Cancel
      </button>
                        </ion-item-options>
                        <ion-item-options side="right">
                            <button ion-button color="light" (click)="showEditCodes(s.surgery,'CPT')">
        <ion-icon name="barcode"></ion-icon>
        CPT
      </button>
                            <button ion-button color="light" (click)="showEditCodes(s.surgery,'DX')">
        <ion-icon name="barcode"></ion-icon>
        DX
      </button>
                        </ion-item-options>
                    </ion-item-sliding>
                </ion-list>






                <ion-card-content>

                    <ion-list border>


                        <button ion-item (click)="showEditCodes(s.surgery,'CPT')">
    <ion-icon name="barcode" item-left small></ion-icon>
    <h2>CPT Codes</h2>
    <p>{{s.surgery.cpt}}</p>
    
  </button>

                        <button ion-item (click)="showEditCodes(s.surgery,'DX')">
    <ion-icon name="barcode" item-left small></ion-icon>
    <h2>DX Codes</h2>
    <p>{{s.surgery.diagnosisCode}}</p>
  </button>



                        <ion-item>
                            <ion-icon name="cash" item-left small></ion-icon>
                            <h2>Bill</h2>
                            <p>Send billing information to <b>{{s.surgery.billingCoordinatorName}}</b></p>
                            <button ion-button clear item-end (click)="sendBilling(s.surgery)">Bull</button>
                        </ion-item>


                        <ion-item>
                            <h2>Bill</h2>
                            <p>Send billing information to <b>{{s.surgery.billingCoordinatorName}}</b></p>
                            <button ion-button clear item-end (click)="sendBilling(s.surgery)">  <ion-icon name="cash" item-left small></ion-icon></button>
                        </ion-item>


                        <button ion-item small color="favorite" (click)="sendBilling(s.surgery)">
    <ion-icon name="cash" item-left small ></ion-icon>
    <h2>Bill</h2> 
    <p>Send billing information to <b>{{s.surgery.billingCoordinatorName}}</b></p> 
  </button>
                        <button ion-item small color="danger" (click)="cancelSurgery(s.surgery,slidingItem)">
    <ion-icon name="close-circle" item-left small></ion-icon>
    <h2>Cancel</h2>
    <p>Cancel surgery and remove from this list!</p>
  </button>


                    </ion-list>
                </ion-card-content>
            </ion-card>
        </ion-list>
        <ion-list-header [hidden]="surgeries > 0" *ngSwitchCase="'past'">
            No Past Surgeries
        </ion-list-header>
    </div>
</ion-content>